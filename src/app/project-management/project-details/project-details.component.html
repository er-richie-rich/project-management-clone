<section class="dashboard-content">
	<div class="box-style-breadcrumb p-4 mt-3">
		<div class="table-wrapper resource-color-table">
			<div class="table-content box-style"
			     style="border-radius: 0px 0px 3px 3px;border-bottom: 2px dashed #d7d7d8;">
				<div class="table-content-text">
					<h3 style="font-weight: 700">{{projectCode}}-{{projectName}}</h3>
					<p>{{projectDescription}}
					</p>
				</div>
			</div>
			<div class="table-content box-style">
				<div class="table-heading">
					<h3 style="font-weight: 700">Milestone</h3>
					<div class="search-form-wrapper">
						<!--Search-->
						<div class="search-form">
							<span class="material-icons">search</span>
							<input #input #searchString (keydown)="space($event)" (keyup)="applyFilter($event)"
							       placeholder="Search" type="text">
							<span #clearString (click)="clearSearch($event)" *ngIf="isVisible"
							      class="closeIcon material-icons">clear</span>
						</div>
						
						<button class="btn-style red-btn"
						        routerLink="/project-management/project-details/add-milestone/{{projectId}}/0/">
							<span class="material-icons">add</span>Add Milestone
						</button>
					</div>
				</div>
				
				<!--      'title', 'expectedDate', 'milestoneStatus', 'action'-->
				<table [dataSource]="dataSource" mat-table matSort style="width: 100%">
					
					<!--Action Column-->
					<ng-container matColumnDef="action2">
						<th *matHeaderCellDef mat-header-cell>
							<div class="d-flex align-items-center ">
								Action
							</div></th>
						<td *matCellDef="let element;index as i;" mat-cell>
							<div class="hover-effect-menu">
								<!--              <span class="material-icons short-arrow" (mouseover)='over()' (mouseout)='out()'>more_horiz</span>-->
								<span class="material-icons short-arrow">more_horiz</span>
								<div class="hover-half-round-two">
									<div class="quarter-circle">
										<button
												(click)="deleteMilestone(element.milestoneId)"
												class="material-icons mat-menu-item mat-menu-delete"
												matTooltip="Delete"
												matTooltipClass='tooltip-color'
												tabindex="0">
											delete
										</button>
										<button
												(click)="updateProjet(element.milestoneId)"
												class="material-icons mat-menu-item mat-menu-web"
												matTooltip="Edit"
												matTooltipClass='tooltip-color'
												tabindex="0">
											drive_file_rename_outline
										</button>
										<div class="quarter-circle-nested"></div>
									</div>
								</div>
							</div>
						</td>
					</ng-container>
					<!--Action Column-->
					
					<!-- projectCode Column -->
					<ng-container matColumnDef="title">
						<th (click)="sortData('milestoneTitle', sortBy)" *matHeaderCellDef mat-header-cell
						    mat-sort-header style="width: 15%">
							<div class="th-header d-flex align-items-center ">
								Title <span
									[ngClass]="{'down': sortBy === -1 && sortKey === 'milestoneTitle', 'up': sortBy === 1 && sortKey === 'milestoneTitle'}">
                      </span>
							</div>
						</th>
						<td *matCellDef="let element" class="text-capitalize" mat-cell>
							{{element.milestoneTitle}}
						</td>
					</ng-container>
					<!-- projectCode Column -->
					
					<!-- startDate Column -->
					<ng-container matColumnDef="expectedDate">
						<th (click)="sortData('expectedDate', sortBy)" *matHeaderCellDef mat-header-cell
						    mat-sort-header>
							<div class="th-header d-flex align-items-center ">
								Expected Date <span
									[ngClass]="{'down': sortBy === -1 && sortKey === 'expectedDate', 'up': sortBy === 1 && sortKey === 'expectedDate'}">
                      </span>
							</div>
						</th>
						<td *matCellDef="let element" mat-cell
						    style="white-space: nowrap;"> {{element.expectedDate | date : "MM/dd/YYYY"}} </td>
					</ng-container>
					<!-- startDate Column -->
					
					<!-- projectName Column -->
					<ng-container matColumnDef="milestoneStatus">
						<th (click)="sortData('milestoneStatus', sortBy)" *matHeaderCellDef mat-header-cell
						    mat-sort-header style="width: 15%">
							<div class="th-header d-flex align-items-center ">
								Status <span
									[ngClass]="{'down': sortBy === -1 && sortKey === 'milestoneStatus', 'up': sortBy === 1 && sortKey === 'milestoneStatus'}">
                      </span>
							</div>
						</th>
						<td *matCellDef="let element" [ngClass]="{'Completed': element.milestoneStatus === 'completed' , 'onHold' : element.milestoneStatus === 'on hold' ,'inProgress' :  element.milestoneStatus === 'in progress' }" class="text-capitalize" mat-cell>
							{{element.milestoneStatus}}
						</td>
					</ng-container>
					<!-- projectName Column -->
					
					<tr *matHeaderRowDef="displayedColumns;sticky:true" mat-header-row></tr>
					<tr (click)="selection.toggle(row)" *matRowDef="let row; columns: displayedColumns;" mat-row></tr>
					<!-- Row shown when there is no matching data. -->
					<tr *matNoDataRow class="mat-row">
						<td class="mat-cell text-center" colspan="10">Data Not Available</td>
					</tr>
				</table>
				<mat-paginator
						(page)="pageChange($event)"
						[hidePageSize]="false"
						[length]="meta"
						[pageIndex]="page"
						[pageSizeOptions]="pageSizeOptions"
						[pageSize]="perPage"
						color="warn"
						showFirstLastButtons
				></mat-paginator>
			</div>
		
		</div>
	</div>
</section>

